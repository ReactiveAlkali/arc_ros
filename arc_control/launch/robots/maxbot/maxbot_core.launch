<!--
The launch file for a single maxbot
-->

<launch>
    <master auto="start"/>
    <arg name="bot_id" default=""/>
    <!-- The wifi handler -->
    <node pkg="arc_core" type="wifi_handler_node" name="wifi_handler">
        <param name="max_signal_range" value="5"/>
    </node>

    <!-- The communication manager -->
    <node pkg="arc_core" type="communication_manager" name="communication_manager" output="screen"></node>

    <!-- The role manager -->
    <node pkg="arc_core" type="role_manager" name="role_manager" output="screen"></node>

    <!-- The victim tracker -->   
<!--    <node pkg="arc_core" type="victim_tracker" name="victim_tracker" output="screen">
    </node>
-->
    <!-- The knowledge manager -->
    <node pkg="arc_core" type="knowledge_manager" name="knowledge_manager" output="screen">
        <param name="locomotion" value="1"/>
        <param name="width" value="0.38"/>
        <param name="length" value="0.44"/>
        <param name="expendability" value="0.05"/>
        <param name="debris_remover" value="false"/>
        <param name="marker_count" value="2"/>
        <param name="victim_tracker" value="true"/>
        <param name="frontier_finder" value="true"/>
        <param name="maintain_team_map" value="true"/>
        <param name="assign_tasks" value="true"/>
        <param name="planner" value="true"/>
        <param name="victim_sensor" value="0"/>
        <param name="robot_sensor" value="true"/>
        <param name="sonar_sensors" value="3"/>
        <param name="sonar_range" value="2.0"/>
        <param name="laser_rangefinder" value="true"/>
        <param name="victim_marker_detector" value="true"/>
        <param name="robot_id" value="$(arg bot_id)"/>
        <param name="roles" value="0:explore,0.03;explore_frontier,0.04;find_victim,0.03;manage_team,0.8;encounter,0.1|1:explore,0.05;explore_frontier,0.6;find_victim,0.35|2:explore,0.05;explore_frontier,0.1;find_victim,0.05;confirm_victim,0.5;manage_team,0.2;encounter,0.2"/>
        <param name="ideal_team" value="0,1,1,100|1,3,10,30|2,1,2,50"/>
        <param name="team_id" value="41b39c5b-4ca0-48b9-af74-d5694f46abcc"/>
    </node>

    <!-- tasks this robot can perform -->
    <node pkg="arc_tasks" type="task_unguided_clean_debris_server" name="task_unguided_clean_debris_server" output="screen"/>
    <node pkg="arc_tasks" type="task_guided_clean_debris_server" name="task_guided_clean_debris_server" output="screen"/>
    <node pkg="arc_tasks" type="task_explore_server" name="task_explore_server" output="screen"/>

    <!-- the task handler that will manage task requests. -->
    <node pkg="arc_core" type="task_handler" name="task_handler">
    <rosparam param="valid_tasks">["explore", "unguided_clean_debris", "guided_clean_debris"]</rosparam>
    </node>

    <!-- THE CORE RECRUITMENT MANAGER OF ROBOT -->
    <node pkg="arc_recruitment_demos" type="minimal_recruitment_manager" name="recruitment_manager" output="screen">
    </node>
</launch>
